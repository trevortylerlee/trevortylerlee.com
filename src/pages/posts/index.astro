---
import { getCollection } from "astro:content";

import BaseLayout from "../../layouts/BaseLayout.astro";
import MorePost from "../../components/MorePost.astro";

export async function getStaticPaths() {
  const allPosts = await getCollection("posts");

  return allPosts.map((post) => ({
    params: { slug: post.slug },
    props: {
      post,
    },
  }));
}

const allPosts = await getCollection("posts");
const { page } = Astro.props;
---

<BaseLayout>
  <h1>All Posts</h1>
  {
    allPosts.map((page) => (
      <MorePost
        date={page.data.date}
        href={page.slug}
        title={page.data.title}
      />
    ))
  }
</BaseLayout>

<style>
  h1 {
    margin-bottom: 2rem;
  }

  div {
    padding-top: 1rem;
  }
</style>
