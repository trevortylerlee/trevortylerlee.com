---
import { Icon } from "astro-icon/components";
import classlessCSS from "@assets/posts/classlesscss.png";
import t2a from "@assets/posts/t2a.jpg";
import phished from "@assets/posts/phished.png";
import swiftiedotred from "@assets/posts/swiftiedotred.jpg";
import thirtysixquestions from "@assets/posts/thirtysixquestions.jpg";
import BaseLayout from "src/layouts/BaseLayout.astro";
import { formatBlogPost } from "src/lib/utils";
import { getCollection } from "astro:content";
import Post from "@components/Post.astro";
import Project from "@components/Project.astro";
import ContactLinks from "@components/ContactLinks.astro";

const allPosts = await getCollection("posts");
const formattedPosts = formatBlogPost(allPosts, {
  limit: 5,
});

const pageTitle = "Trevor Lee | Homepage";
---

<BaseLayout pageTitle={pageTitle}>
  <section class="py-24 text-center sm:py-32">
    <p class="text-sm italic text-textVariant">~ Hello and welcome ~</p>
    <div class="text-xl">
      <h1 class="inline-flex">
        I'm&nbsp;<a href="/about" class="link">Trevor</a>!
      </h1>
      <p class="inline-flex">I'm a software developer.</p>
    </div>
    <div class="pt-12">
      <ContactLinks />
    </div>
  </section>
  <section class="animate-down">
    <span class="py-2 font-mono text-sm text-textVariant">
      <h2 class="py-2">latest posts</h2>
    </span>
    <ul>
      {
        formattedPosts.map((post) => (
          <Post
            date={post.data.date}
            href={post.slug}
            title={post.data.title}
            description={post.data.description}
          />
        ))
      }
    </ul>
    <div class="flex justify-end pb-8">
      <a href="/posts" class="link group flex items-center gap-1 py-2"
        >view older posts <Icon
          class="text-text group-hover:animate-horizontal-bounce group-hover:text-primary group-focus:animate-horizontal-bounce group-focus-visible:text-primary"
          name="arrow-right"
        />
      </a>
    </div>
  </section>
  <section class="animate-down">
    <h2 class="pb-4 pt-16 font-mono text-sm text-textVariant">projects</h2>
    <ul class="grid gap-3 sm:grid-cols-2 sm:gap-6">
      <Project
        description="These thirty six questions foster closeness through mutual vulnerability."
        href="https://thirtysixquestions.org"
        title="thirtysixquestions.org"
        src={thirtysixquestions}
        online
      />
      <Project
        description="The best website for Swifties."
        href="https://swiftie.red"
        title="swiftie.red"
        src={swiftiedotred}
        online
      />
      <Project
        description="Site to instantly preview drop-in CSS themes."
        href="https://classlesscss.com"
        title="classlesscss.com"
        src={classlessCSS}
        online
      />
      <Project
        description="Tired of typing out arrays? Me too..."
        href="https://text2array.vercel.app/"
        title="Text 2 Array"
        src={t2a}
        online
      />
      <Project
        description="Protect your friends and family from phishing attacks by phishing them yourself."
        href="https://github.com/phished-co/phished_web_app"
        title="Phished"
        src={phished}
        offline
      />
    </ul>
  </section>
</BaseLayout>
